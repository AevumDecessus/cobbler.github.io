<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <meta name="author" content="Cobbler development team" />

   <title>Func Integration</title>

   <!-- CSS -->
   <link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.8.18/themes/base/jquery-ui.css" />
   <link rel="stylesheet" type="text/css" href="/lib/bootstrap/css/bootstrap.min.css" />
   <link rel="stylesheet" type="text/css" href="/lib/bootstrap/css/bootstrap-responsive.min.css" />
   <link rel="stylesheet" type="text/css" href="/lib/font/font-awesome.css" />
   <link rel="stylesheet" type="text/css" href="/lib/font/font-awesome-ext.css" />
   <link rel="stylesheet" type="text/css" href="/css/syntax.css" />
   <link rel="stylesheet" type="text/css" href="/css/style.css" />
   <link rel="stylesheet" type="text/css" href="/css/search.css" />

   <!-- Fonts -->
   <link rel='stylesheet' type='text/css' href='http://fonts.googleapis.com/css?family=Habibi|Roboto+Condensed' />

   <!--[if lt IE 9]>
     <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
   <![endif]-->

   <!-- Icon -->
   <link rel="icon" type="image/png" href="/images/favicon.png" />

   <!-- JQuery/Bootstrap/custom scripts -->
   <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
   <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.18/jquery-ui.min.js"></script>
   <script type="text/javascript" src="/lib/bootstrap/js/bootstrap.min.js"></script>
   <script type="text/javascript" src="/js/jquery.ba-hashchange.min.js"></script>
   <script type="text/javascript" src="/js/jquery.swiftype.search.js"></script>
</head>
<body class="pull_up">

<!-- ClickTale Top part -->
<script type="text/javascript">
var WRInitTime=(new Date()).getTime();
</script>
<!-- ClickTale end of Top part -->

<div class="navbar transparent navbar-inverse navbar-fixed-top">
 <div class="navbar-inner">
  <div class="container">
   <a class="brand" href="/"><img class="logo" src="/images/logo-brand.png" /></a>
   <div class="nav-collapse collapse">
    <ul class="nav pull-right">
     <li><a href="/about.html" title="About Cobbler"><i class="icon-cloud icon-med"></i> About Cobbler</a></li>

     <li class="dropdown">
       <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-question-sign icon-med"></i> Downloads <b class="caret"></b></a>
       <ul class="dropdown-menu">
         <li><a href="/downloads/source/" title="Source">Source</a></li>
         <li><a href="/downloads/packages/" title="Packages">Packages</a></li>
       </ul>
     </li>

     <li><a href="/posts/" title="Blog Posts"><i class="icon-bookmark icon-med"></i> Blog Posts</a></li>
     <li class="dropdown">
       <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-question-sign icon-med"></i> Manuals <b class="caret"></b></a>
       <ul class="dropdown-menu">
         <li><a href="/manuals/quickstart/" title="Quickstart Guide">Quickstart Guide</a></li>
         <li><a href="/manuals/2.6.0/" title="Version 2.6.x">User Manual 2.6.x</a></li>
         <li><a href="/manuals/2.4.0/" title="Version 2.4.x">User Manual 2.4.x</a></li>
         <li><a href="/manuals/2.2.3/" title="Version 2.2.x">User Manual 2.2.x</a></li>
         <li><a href="/manuals/developer/" title="Developer Guide">Developer Guide</a></li>
       </ul>
     </li>
     <li class="dropdown">
       <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-group icon-med"></i> Community <b class="caret"></b></a>
       <ul class="dropdown-menu">
         <li><a href="/community.html" title="How to Get Help">How to Get Help</a></li>
         <li><a href="/supporters.html" title="Supporters of Cobbler">Supporters</a></li>
         <li><a href="/users.html" title="Cobbler Users">Who's Using Cobbler</a></li>
       </ul>
     </li>
     <li class="dropdown">
       <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="icon-github icon-med"></i> Github <b class="caret"></b></a>
       <ul class="dropdown-menu">
        <li><a href="https://github.com/cobbler/cobbler" title="Main Repository" target="_blank">Main Repo</a></li>
        <li><a href="https://github.com/cobbler/cobbler/issues" title="Issues" target="_blank">Issue Tracker</a></li>
        <li><a href="https://github.com/cobbler/cobbler/wiki" title="Github Wiki" target="_blank">Wiki</a></li>
       </ul>
     </li>
     <li>
      <form class="pull-right">
       <input type="text" id="st-search-input" class="st-search-input" />
      </form>
     </li>
    </ul>
    <!-- <div id="st-results-container"></div> -->
    <script type="text/javascript">
      var Swiftype = window.Swiftype || {};
      (function() {
        Swiftype.key = 'ybEhsDqz2mEFrMtBHiwB';
        Swiftype.inputElement = '#st-search-input';
        Swiftype.resultContainingElement = '#st-results-container';
        Swiftype.attachElement = '#st-search-input';
        Swiftype.renderStyle = "new_page";
        Swiftype.resultPageURL = '/search.html';
        var script = document.createElement('script');
        script.type = 'text/javascript';
        script.async = true;
        script.src = "//swiftype.com/embed.js";
        var entry = document.getElementsByTagName('script')[0];
        entry.parentNode.insertBefore(script, entry);
      }());
    </script>
   </div>
   <!--
   <form class="navbar-search pull-right" onsubmit="return false;">
    <input id="searchbox" type="text" class="search-query" placeholder="Search Manuals" />
   </form>
   -->
  </div>
 </div>
</div>


<!-- begin content -->

<div id="wrap" class="container">
 <div class="row">
  <div class="span8">
<ul class="breadcrumb"><li><a href="/manuals">manuals</a> <span class="divider">/</span></li><li><a href="/manuals/2.2.3">2.2.3</a> <span class="divider">/</span></li><li><a href="/manuals/2.2.3/5_-_Advanced_Topics.html">5</a> <span class="divider">/</span></li><li><a href="/manuals/2.2.3/5/3_-_Configuration_Management.html">3</a> <span class="divider">/</span></li><li class="active">Func Integration</li></ul>
   <h1>Func Integration</h1>
<p>Func is a neat tool, (which, in full disclosure, Michael had a part
in creating). Read all about it at
<a href="https://fedorahosted.org/func">https://fedorahosted.org/func</a></p>

<p>Integration with kickstart is pretty easy, see
<a href="https://fedorahosted.org/func/wiki/InstallAndSetupGuide">https://fedorahosted.org/func/wiki/InstallAndSetupGuide</a>
and
<a href="https://fedorahosted.org/func/wiki/IntegratingWithProvisioning">https://fedorahosted.org/func/wiki/IntegratingWithProvisioning</a></p>

<h2>Even Easier Integration</h2>

<p>Cobbler makes it even easier to deploy Func though. We have two
settings in /etc/cobbler/settings:</p>

<pre><code>func_master: overlord.example.org
func_auto_setup: 1
</code></pre>

<p>This will make sure the right packages are in packages for each
kickstart and the right bits are automatically in %post to set it
up... so a new user can set up a cobbler server, set up a func
overlord, and automatically have all their new kickstarts
configurable to point at that overlord.</p>

<p>This will be available in all the sample kickstart files, but will
be off by default. To enable this feature all you need to do then
is set up</p>

<h2>How This Is Implemented</h2>

<p>This is all powered by cobbler's
<a href="Kickstart%20Templating">Kickstart Templating</a> and
<a href="Kickstart%20Snippets">Kickstart Snippets</a> feature, with
two snippets that ship stock in /var/lib/cobbler/snippets</p>

<pre><code>%packages
koan
...
$func_install_if_enabled 

%post
...
SNIPPET:func_register_if_enabled
</code></pre>

<p>If curious you can read the implementations in
/var/lib/cobbler/snippets and these are of course controlled by the
aforemented values in settings.</p>

<p>The "func_register_if_enabled" snippet is pretty basic.</p>

<p>It configures func to point to the correct certmaster to get
certificates and enables the service. When the node boots into the
OS it will request the certificate (see note on autosigning below)
and func is now operational. If there are problems, see
/var/log/func and /var/log/certmaster for debugging info (or other
resources and information on the Func Wiki page). Func also has an
IRC channel and mailing list as indicated on
<a href="http://fedorahosted.org/func">http://fedorahosted.org/func</a></p>

<h2>Notes about Func Autosigning</h2>

<p>This may work better for you if you are using Func autosigning,
otherwise the administrator will need to use certmaster-ca --sign
hostname (see also certmaster-ca --list) to deal with machines.</p>

<p>Not using autosigning is good if you don't trust all the hosts you
are provisioning and don't want to enslave unwanted machines.</p>

<p>Either choice is ok, just be aware of the manual steps required if
you don't enable it, or the implications if you do.</p>

<h2>Package Hookup</h2>

<p>If you are not already using Cobbler to mirror package content, you
are going to want to, so that you can make the func packages
available to your systems -- they are not part of the main install
"tree".</p>

<p>Thankfully Cobbler makes this very simple -- see
<a href="Manage%20Yum%20Repos">Manage Yum Repos</a> for details</p>

<h3>for Fedora</h3>

<p>Func is part of the package set for Fedora, but you need to mirror
the "Everything" repo to get at it. Therefore you will want to
mirror "Everything" and make it available to your cobbler profiles
so you can effectively put func on your installed machines. You
will also want to mirror "updates" to make sure you get the latest
func.</p>

<p>An easy way to mirror these with cobbler is just:</p>

<pre><code>cobbler repo add --name=f10-i386-updates --mirror=http://download.fedora.redhat.com/pub/fedora/linux/updates/10/i386/
cobbler repo add --name=f10-i386-everything --mirror=http://download.fedora.redhat.com/pub/fedora/linux/releases/10/Everything/i386/os/Packages/
</code></pre>

<p>Then you need to make sure that every one of your Fedora profiles
is set up to use the appropriate repos:</p>

<pre><code>cobbler profile edit --name=f10-profile-name-goes-here --repos="f10-i386-updates f10-i386-everything"
</code></pre>

<p>And then you would probably want to put 'cobbler reposync' on cron
so you keep installing the latest func, not an older func.</p>

<h3>for Enterprise Linux 4 and 5</h3>

<p>As with Fedora, you'll need to configure your systems as above to
get func onto them, and that is not included as part of the Func
integration process. RHEL 5 uses yum, so it can follow similar
instructions as above. That's very simple. In those cases you will
just want to mirror the repositories for EPEL:</p>

<pre><code>cobbler repo add --name=el-5-i386-epel --mirror=http://download.fedora.redhat.com/pub/epel/5/i386
cobbler repo add --name=el-5-i386-epel-testing --mirror=http://download.fedora.redhat.com/pub/epel/testing/5/i386 
</code></pre>

<p>Of course in the above you would want to substitute '4' for '5' if
neccessary and also 'i386' for 'x86_64' if neccessary. You will
probably want to mirror multiples of the above. Cobbler doesn't
care, just go ahead and do it. If you have space concerns, as
discussed on <a href="Manage%20Yum%20Repos">Manage Yum Repos</a> you can
use the --rpm-list parameter to do partial yum mirroring.</p>

<p>Once you do this, you will need to make sure your EL profiles (for
those that support yum, i.e. the EL 5 and later ones) know about
the repos and attach to them automatically:</p>

<pre><code>cobbler profile edit --name=el5-profile-name-goes-here --repos="el-5-i386-epel el-5-i386-epel-testing"
</code></pre>

<p>Another simple option is to just put the func RPMs on a webserver
somewhere and wget them from the installer so they are available at
install time, you would do this as the very first step in post.</p>

<pre><code>%post
wget http://myserver.example.org/func-version.rpm -O /tmp/func.rpm
rpm -i /tmp/func.rpm 
</code></pre>

<h2>Func Questions</h2>

<p>See #func on irc.freenode.net and func-list@redhat.com</p>

     <hr>
     <div id="disqus_thread"></div>
     <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'cobbler'; // required: replace example with your forum shortname
        var disqus_identifier = '';

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
     </script>
     <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
     <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


  </div>
  <div class="span4">
<div class="toc"><ul class="dirtree"><li><a href="/manuals/2.2.3/5/3/1_-_Built-In_Configuration_Management.html">1 - Built-In Configuration Management</a></li><li><a href="/manuals/2.2.3/5/3/2_-_Puppet_Integration.html">2 - Puppet Integration</a></li><li><a href="/manuals/2.2.3/5/3/3_-_Func_Integration.html">3 - Func Integration</a></li></ul></div>
  </div>
 </div>
</div>
<!-- end content -->

<footer>
  <div class="container">
    <div class="row-fluid sections">
      <div class="span6 footmenu">
       <div class="row-fluid">
        <div class="span3 sitemap">
         <ul class="nav nav-list">
          <li class="nav-header">Pages</li>
          <li><a href="/">Home</a></li>
          <li><a href="/posts/">Blog Posts</a></li>
          <li><a href="/about.html">About Cobbler</a></li>
         </ul>
        </div>
        <div class="span2 sitemap">
         <ul class="nav nav-list">
          <li class="nav-header">Manuals</li>
          <li><a href="/manuals/quickstart/">Quickstart</a></li>
          <li><a href="/manuals/2.6.0/">2.6.x</a></li>
          <li><a href="/manuals/2.4.0/">2.4.x</a></li>
          <li><a href="/manuals/2.2.3/">2.2.x</a></li>
          <li><a href="/manuals/developer/">Developer</a></li>
         </ul>
        </div>
        <div class="span3 sitemap">
         <ul class="nav nav-list">
          <li class="nav-header">Community</li>
          <li><a href="/community.html">How to Get Help</a></li>
          <li><a href="/supporters.html">Supporters</a></li>
          <li><a href="/users.html">Who's Using Cobbler</a></li>
         </ul>
        </div>
        <div class="span4 sitemap">
         <ul class="nav nav-list">
          <li class="nav-header">Github</li>
          <li><a href="https://github.com/cobbler/cobbler">Code Repository</a></li>
          <li><a href="https://github.com/cobbler/cobbler/issues">Issue Tracker</a></li>
          <li><a href="https://github.com/cobbler/cobbler/wiki">Wiki</a></li>
         </ul>
        </div>
       </div>
    <div class="row-fluid">
    </div>
    <div class="row-fluid">
     <p class="ending">Best viewed in anything but Internet Explorer&#0153; Seriously, please consider switching.</p>
     <p class="browsers">
      <a href="https://www.mozilla.org/en-US/firefox/new/"><i class="icon-firefox icon-2x"></i></a>
      <a href="https://www.google.com/intl/en/chrome/browser/"><i class="icon-chrome icon-2x"></i></a>
      <a href="http://www.opera.com/"><i class="icon-opera icon-2x"></i></a>
      <a href="http://www.apple.com/safari/"><i class="icon-safari icon-2x"></i></a>
     </p>
    </div>
      </div>
      <div class="span3 posts">
        <p class="column_header">Recent Posts:</p>

        <div class="post">
          <p class="title"><a href="/posts/2014/04/13/cobbler_2.6.0_released.html">Cobbler 2.6.0 Released</a></p>
          <p class="author">Posted by Jörgen on Sunday, April 13, 2014</p>
        </div>

        <div class="post">
          <p class="title"><a href="/posts/2014/03/09/cobbler_2.4.3_released.html">Cobbler 2.4.3 Released</a></p>
          <p class="author">Posted by Jörgen on Sunday, March 09, 2014</p>
        </div>

        <div class="post">
          <p class="title"><a href="/posts/2014/02/15/cobbler_2.4.2_released.html">Cobbler 2.4.2 Released</a></p>
          <p class="author">Posted by Jörgen on Saturday, February 15, 2014</p>
        </div>

        <div class="post">
          <p class="title"><a href="/posts/2014/02/03/cobbler_2.4.1_released.html">Cobbler 2.4.1 Released</a></p>
          <p class="author">Posted by Jörgen on Monday, February 03, 2014</p>
        </div>

      </div>
      <div class="span3 credits">
        <div class="social">
          <a href="https://twitter.com/cobblerista" class="twitter-follow-button" data-show-count="false" data-size="large" data-dnt="true" data-width="100%">Follow @cobblerista</a>
          <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
        </div>
        <div class="attributions">
          <p class="column_header">Attributions:</p>
          <div class="attribution">"Lens Flare", by <a href="http://creativity103.com/"><img src="/images/creativity103.gif" /></a></div>
          <div class="attribution">"Gears", by <a href="http://www.flickr.com/photos/17258892@N05/">Ralph Bijker</a></div>
        </div>
        <div class="copyright">
          <p>All other content, &copy; <span id="copyyear"></span><br/>by James Cammarata</p>
          <script>$("#copyyear").text((new Date).getFullYear());</script>
        </div>
      </div>            
    </div>
  </div>
</footer>

<!-- Google Analytics -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27319020-1']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
<!-- Google Analytics end -->

</body>
</html>

